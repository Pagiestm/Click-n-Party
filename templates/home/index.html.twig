{% extends 'base.html.twig' %}

{% block title %}Accueil
{% endblock %}

{% block body %}
	<div class="py-3 space-y-4 bg-custom-green flex flex-col">
		<div class="flex items-center overflow-hidden">
			<span class="whitespace-nowrap text-2xl animate-scroll">
				- WELCOME TO CLICK'N PARTY - WELCOME TO CLICK'N PARTY - WELCOME TO CLICK'N PARTY - WELCOME TO CLICK'N PARTY - WELCOME TO CLICK'N PARTY - WELCOME TO CLICK'N PARTY&nbsp;</span>
			<span class="whitespace-nowrap text-2xl animate-scroll">
				- WELCOME TO CLICK'N PARTY - WELCOME TO CLICK'N PARTY - WELCOME TO CLICK'N PARTY - WELCOME TO CLICK'N PARTY - WELCOME TO CLICK'N PARTY - WELCOME TO CLICK'N PARTY&nbsp;</span>
		</div>
		<div class="w-11/12 m-auto">
			<div class="relative">
				<svg
					class="hidden md:block" width="100%" viewbox="0 0 1401 562" fill="none" xmlns="http://www.w3.org/2000/svg">
					<!-- Définition du masque -->
					<mask id="video-mask">
						<path fill="#ffffff" d="M37 0C16.5655 0 0 16.5655 0 37V429C0 449.435 16.5654 466 37 466H267C286.882 466 303 482.118 303 502V525C303 545.435 319.565 562 340 562H1364C1384.43 562 1401 545.435 1401 525V108C1401 87.5655 1384.43 71 1364 71H1156C1137.22 71 1122 55.7777 1122 37V37C1122 16.5655 1105.43 0 1085 0H37Z"/>
					</mask>

					<!-- Forme du SVG -->
					<path
					fill-rule="evenodd" clip-rule="evenodd" d="M37 0C16.5655 0 0 16.5655 0 37V429C0 449.435 16.5654 466 37 466H267C286.882 466 303 482.118 303 502V525C303 545.435 319.565 562 340 562H1364C1384.43 562 1401 545.435 1401 525V108C1401 87.5655 1384.43 71 1364 71H1156C1137.22 71 1122 55.7777 1122 37V37C1122 16.5655 1105.43 0 1085 0H37Z" fill="#A7A3A3"/>

					<!-- Vidéo avec le masque appliqué -->
					<foreignObject x="0" y="0" width="100%" height="100%" mask="url(#video-mask)">
						<body xmlns="http://www.w3.org/1999/xhtml">
							<video autoplay muted loop width="100%" height="100%"><source src="{{ asset('videos/test.mp4') }}" type="video/mp4"></video>
						</body>
					</foreignObject>
				</svg>
				<div class="space-y-4 absolute top-0 right-0 mt-2 mr-2 flex justify-between items-center">
					{% if is_granted('IS_AUTHENTICATED_FULLY') %}
						<a href="#" id="openModal" class="bg-custom_green_dark text-custom-green font-bold py-2 px-4 rounded-full w-10 h-10 flex items-center justify-center">
							{{ app.user.prenom|slice(0, 1) }}
						</a>
					{% else %}
						<a href="/login" class="bg-custom_green_dark text-custom-green font-bold py-2 px-4 h-10 flex items-center justify-center">
							Se connecter
						</a>
					{% endif %}
				</div>
				{% include 'home/modal.html.twig' %}
			</div>
			<div class="flex justify-center items-center my-8 w-auto h-auto">
				<form action="/search" method="get" class="mr-4 flex items-center justify-between text-sm leading-1 sm:py-1 py-1 pl-4 pr-2 rounded-full border border-black bg-custom-green-light md:w-8/12 w-full">
					<div class="flex flex-col items-start border-r-0 sm:border-r py-2 md:w-4/12 w-full">
						<label for="location" class="px-4 text-xs hidden sm:block font-bold">Location</label>
						<input type="search" name="location" placeholder="Rechercher une destination" class="px-4 rounded flex-grow bg-transparent border-none focus:outline-none align-middle w-full">
					</div>
					<div class="bg-black w-[1px] h-8 sm:flex hidden"></div>
					<div class="flex-col items-start border-rhidden sm:flex hidden py-2 w-3/12">
						<label for="start_date" class="px-4 text-xs font-bold">Arrivée</label>
						<input type="text" placeholder="Quand ?" onfocus="(this.type='date')" name="start_date" class="px-4 rounded flex-grow bg-transparent border-none focus:outline-none">
					</div>
					<div class="bg-black w-[1px] h-8 sm:flex hidden"></div>
					<div class="flex-col items-start sm:flex hidden py-2 w-3/12">
						<label for="end_date" class="px-4 text-xs font-bold">Départ</label>
						<input type="text" placeholder="Quand ?" onfocus="(this.type='date')" name="end_date" class="px-4 rounded flex-grow bg-transparent border-none focus:outline-none ">
					</div>
					<div class="bg-black w-[1px] h-8 sm:flex hidden"></div>
					<div class="sm:flex hidden flex-col items-start border-r-0 sm:border-r py-2 w-2/12">
						<label for="location" class="px-4 text-xs hidden sm:block font-bold">Fêtards</label>
						<input type="search" name="location" placeholder="Nombre de fêtards" class="px-4 rounded flex-grow bg-transparent border-none focus:outline-none align-middle">
					</div>
					<div class="w-2/12 flex flex-col justify-end items-end">
						<button type="submit" class="bg-custom_green_dark text-custom-green font-bold h-12 w-12  rounded-full flex flex-col justify-center items-center">
							<svg width="17" height="16" viewbox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M13.5416 13.0417L10.4166 9.91671M1.45831 6.16671C1.45831 3.29022 3.79016 0.958374 6.66665 0.958374C9.54313 0.958374 11.875 3.29022 11.875 6.16671C11.875 9.04319 9.54313 11.375 6.66665 11.375C3.79016 11.375 1.45831 9.04319 1.45831 6.16671Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
						</button>
					</div>
				</form>
			</div>
			<div id="categories" class="flex whitespace-nowrap overflow-x-auto items-stretch">
				{% for categorie in categories %}
					<div class="categorie bg-white p-4 flex flex-col items-center justify-center cursor-pointer w-16 h-16 md:w-20 md:h-20 m-2 transform hover:scale-110 duration-300 shadow-md rounded" data-categorie-id="{{ categorie.id }}">
						<img class="w-16 h-16 md:w-12 md:h-12 object-scale-down" src="{{ categorie.icon }}" alt="{{ categorie.libelle }}">
						<p class="text-xs">{{ categorie.libelle }}</p>
					</div>
				{% endfor %}
			</div>
			<div id="locations" class="grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
				{% for location in locations %}
					{% set isFavoris = false %}
					{% for favori in favoris %}
						{% if favori.getLocations.id == location.id %}
							{% set isFavoris = true %}
						{% endif %}
					{% endfor %}
					<a href="{{ path('app_location', {id: location.id}) }}" class="location overflow-hidden p-2 flex flex-col space-y-4 rounded-3xl" data-categorie-ids="{{ location.Categories|map(c => c.id)|join(',') }}">
						<div class="relative">
							<div class="swiper-container overflow-hidden">
								<div class="swiper-wrapper">
									{% for image in location.images %}
										<div class="swiper-slide">
											<img class="w-full h-[230px] object-cover mb-6 rounded-3xl" src="{{ asset('uploads/' ~ image.Nom) }}" alt="{{ location.Nom }}">
											{% if isFavoris %}
												<svg xmlns="http://www.w3.org/2000/svg" fill="green" class="add-favoris absolute top-0 right-0 m-4 h-6 md:h-6 lg:h-8" viewbox="0 0 24 24" stroke="green" data-location-id="{{ location.id }}">
													<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
												</svg>
											{% else %}
												<svg xmlns="http://www.w3.org/2000/svg" fill="rgba(0, 0, 0, 0.5)" class="add-favoris absolute top-0 right-0 m-4 h-6 md:h-6 lg:h-8" viewbox="0 0 24 24" stroke="white" data-location-id="{{ location.id }}">
													<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
												</svg>
											{% endif %}
										</div>
									{% endfor %}
								</div>
								<div style="color:#053F31;" class="swiper-button-next absolute top-2/3 right-0 transform -translate-y-1/2"></div>
								<div style="color:#053F31;" class="swiper-button-prev absolute top-2/3 left-0 transform -translate-y-1/2"></div>
							</div>
							<div class="flex items-center mb-2">
								<h2 class="text-sm py-0.5 px-2 rounded-full border border-black w-fit-content">{{ location.nom }}</h2>
								{% for categorie in location.getCategories() %}
									<p class="text-sm py-0.5 px-2 rounded-full border border-black w-fit-content ml-1">{{ categorie.getLibelle() }}</p>
								{% endfor %}
							</div>
							<div class="flex items-center mb-2">
								<p class="text-sm py-0.5 px-2 rounded-full border border-black w-fit-content">{{ location.adresse }}</p>
								<p class="text-sm py-0.5 px-2 rounded-full border border-black w-fit-content ml-1">{{ location.prix }}
									$ par jour</p>
							</div>
						</div>
					</a>
				{% endfor %}
			</div>
		</div>
	</div>

{% endblock %}
